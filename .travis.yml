language: python
python:
    - "2.6"
    - "2.7"

install: "pip install -r requirements/project.txt -r requirements/tests.txt"

before_script:
    - sudo apt-get install -y mpd libav-tools libavcodec-extra-53
    - sudo service mpd stop
    - mkdir ~/.mpd/
    - touch ~/.mpd/database
    - sed -i "s%^music_directory.*%music_directory \"$(pwd)/music/\"%" mpd.conf
    - mpd mpd.conf

script:
    coverage run --source . tests/main.py

after_success:
    coveralls
